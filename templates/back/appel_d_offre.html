{% extends 'back/base.html' %}

{% load static %}

{% block title %}Formations{% endblock %}

{% block content %}

                    {% if appels %}
                    <div class="the-container">
                        <h4 class="the-container-title">Appels d'offre</h4>
                        <div class="table-responsive px-3 mt-4">
                            <table class="table border bg-white">
                                <thead class="thead-light">
                                    <tr>
                                        <th class="pb-3">Image</th>
                                        <th class="pb-3">Poste</th>
                                        <th class="pb-3">Domaine</th>
                                        <th class="pb-3">Auteur</th>
                                        <th class="pb-3">Lieu</th>
                                        <th class="pb-3">Tâche</th>
                                        <th class="pb-3">Competences</th>
                                        <th class="pb-3">Description</th>
                                        <th class="pb-3">Membres</th>
                                        <th class="pb-3">Clôture</th>
                                        <th class="pb-3">Publié le</th>
                                    </tr>
                                </thead>
                                <tbody>                
                                {% for item in appels %}
                                <tr>
                                    <td class="pb-3"><img src="{{item.image.url}}" alt="{{item.title}}" style="width: 50px; height: 50px; object-fit: cover;"></td>
                                    <td class="pb-3">{{item.poste}}</td>
                                    <td class="pb-3">{{item.domaine}}</td>
                                    <td class="pb-3">{{item.entreprise}}</td>
                                    <td class="pb-3">{{item.lieu}}</td>
                                    <td class="pb-3" style="min-width: 150px;">{{item.tache|safe|truncatewords:10}}</td>
                                    <td class="pb-3" style="min-width: 150px;">{{item.competence|safe|truncatewords:10}}</td>
                                    <td class="pb-3" style="min-width: 150px;">{{item.description|safe|truncatewords:10}}</td>
                                    <td class="pb-3">
                                        {% if item.postuler.all %}
                                        {% for itm in item.postuler.all %}
                                            {{itm}},
                                        {% endfor %}
                                        {% else %}
                                            Personne pour l'instant
                                        {% endif %}
                                    </td>
                                    <td class="pb-3">{{item.cloture}}</td>
                                    <td class="pb-3">{{item.date}}</td>
                                </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                    {% else %}
                    <div class="container pb-5">
                        <div class="overflow-hidden">
                            <h4 class="mb-4">Appel d'offre</h4>
                        </div>
                        <h5 class="text-muted">Aucun appel d'offre pour l'instant</h5>
                    </div>
                    {% endif %}

{% endblock %}
